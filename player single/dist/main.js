!function(t){var e={};function i(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(o,s,function(e){return t[e]}.bind(null,s));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"main"}},[t.isloaded?i("ul",{on:{click:t.clickInList}},t._l(t.music,function(e){return i("li",{ref:"li",refInFor:!0},[t._v("\r\n\t\t\t"+t._s(e.name)+"\r\n\t\t")])})):i("div",[t._v("\r\n\t\tloading\r\n\t")])])};o._withStripped=!0;var s,n=new Vue,r=axios.create({baseURL:"http://127.0.0.1:8080",timeout:2500});function a(t,e,i,o,s,n,r,a){var u,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),o&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),r?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=u):s&&(u=a?function(){s.call(this,this.$root.$options.shadowRoot)}:s),u)if(l.functional){l._injectStyles=u;var c=l.render;l.render=function(t,e){return u.call(e),c(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,u):[u]}return{exports:t,options:l}}r.interceptors.request.use(function(t){return s.$data.isloaded=!1,console.log("拦截器"),t});var u=a({props:{listID:Number},data:function(){return{music:[{name:"梦灯笼",src:"music/123.mp3"},{name:"なんでもないや",src:"music/321.mp3"},{name:"前前前世",src:"music/113.mp3"}],isloaded:!1}},computed:{li:function(){return this.$refs.li}},methods:{clickInList(t){let e=0;for(e=0;e<this.li.length;e++)this.li[e]==t.target&&n.$emit("newsong",this.music[e])}},mounted(){console.log("mainpage加载");s=this,r.get("/page.json",{headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{listID:this.listID},responseType:"json"}).then(t=>{console.log(t.data),t.data[1],this.$data.music=t.data,this.$data.isloaded=!0})}},o,[],!1,null,null,null);u.options.__file="src/mainpage.vue";var l=u.exports,c=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"bar",staticClass:"bar",on:{mousedown:this.onMouseDown}},[e("div",{staticClass:"cur",style:{width:this.curper+"%"}},[e("div",{ref:"ball",staticClass:"btnOfBar",on:{mousedown:this.onBallDown}})])])};function d(t){let e,i=t.offsetLeft,o=t.offsetParent;for(;null!==o;)i+=o.offsetLeft,o=o.offsetParent;return i-(e=document.body.scrollLeft+document.documentElement.scrollLeft)}function h(t){let e,i=t.offsetTop,o=t.offsetParent;for(;null!==o;)i+=o.offsetTop,o=o.offsetParent;return i-(e=document.body.scrollTop+document.documentElement.scrollTop)}c._withStripped=!0;var m=a({props:{curper:Number},data:function(){return{percentage:0}},computed:{barWidth:function(){return this.$refs.bar.clientWidth}},methods:{onMouseDown(t){console.log("点击了条(子组件)"),this.percentage=100*(t.clientX-d(this.$refs.bar))/this.barWidth,this.percentage,this.$emit("click-in-bar",this.percentage)},onBallDown(t){t.preventDefault(),console.log("点击了球(子组件)"),this.$emit("clickinball",0),document.addEventListener("mousemove",this.onDocumentMouseMove),document.addEventListener("mouseup",this.onDocumentMouseUp)},onDocumentMouseMove(t){console.log("拖动球"),this.percentage=Math.max(0,Math.min(100,100*(t.clientX-d(this.$refs.bar))/this.barWidth)),this.$emit("indrag",this.percentage)},onDocumentMouseUp(){console.log("鼠标放开(子组件)"),this.$emit("dragend",this.percentage),document.removeEventListener("mouseup",this.onDocumentMouseUp),document.removeEventListener("mousemove",this.onDocumentMouseMove)}}},c,[],!1,null,null,null);m.options.__file="src/progressbar.vue";var p=m.exports,f=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"bar",staticClass:"vloumebar",style:{visibility:this.showvolumebar},on:{click:this.onclick,mousedown:this.onMouseDown}},[e("div",{staticClass:"vloumecur",style:{height:100-this.percentage+"%"}})])};f._withStripped=!0;var v=a({props:{volume:Number,muted:String,showvolumebar:String},data:function(){return{percentage:this.volume}},computed:{barHeight:function(){return this.$refs.bar.clientHeight}},methods:{onMouseDown(t){t.preventDefault(),t.stopPropagation(),console.log("点击了音量条(子组件)"),this.percentage=100-100*(t.clientY-h(this.$refs.bar))/this.barHeight,this.percentage,this.$emit("click-in-volume-bar",this.percentage),document.addEventListener("mousemove",this.onDocumentMouseMove),document.addEventListener("mouseup",this.onDocumentMouseUp)},onDocumentMouseMove(t){"拖动球";this.percentage=100-Math.max(0,Math.min(100,100*(t.clientY-h(this.$refs.bar))/this.barHeight)),this.$emit("volume-indrag",this.percentage)},onDocumentMouseUp(t){"鼠标放开(子组件)";document.removeEventListener("mouseup",this.onDocumentMouseUp),document.removeEventListener("mousemove",this.onDocumentMouseMove)},onclick(t){t.stopPropagation()}}},f,[],!1,null,null,null);v.options.__file="src/volumebar.vue";var g=v.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"playlist",style:{visibility:t.showlist}},[i("ul",{on:{click:t.clickInList}},t._l(t.music,function(e){return i("li",{ref:"li",refInFor:!0},[t._v("\n\t\t\t"+t._s(e.name)+"\n\t\t\t"),i("button",{attrs:{type:"button"},on:{click:t.clickInDelet}},[t._v("\n\t\t\t\t删除\n\t\t\t")])])}))])};w._withStripped=!0;var b=a({props:{music:Array,showlist:String},computed:{li:function(){return this.$refs.li}},methods:{clickInList(t){let e=0;for(e=0;e<this.li.length;e++)this.li[e]==t.target&&(console.log(e),this.$emit("index-change",e))},clickInDelet(t){let e=0;for(e=0;e<this.li.length;e++)this.li[e].contains(t.target)&&(console.log("下标是"+e),this.$emit("delet",e))}}},w,[],!1,null,null,null);b.options.__file="src/playlist.vue";var y={el:"#player",data:{music:[],index:0,curper:0,playedtime:"00:00/00:00",showlist:"hidden",volume:75,showVolumeBar:"hidden",muted:"muted:no"},components:{"progress-bar":p,playlist:b.exports,"volume-bar":g},computed:{nowMusic(){return void 0==this.music[this.index]?" ":(console.log("src变了"),this.music[this.index].src)},audio(){return this.$refs.audio},length(){return console.log("长度变了"),this.music.length},songname(){return void 0==this.music[this.index]?" ":this.music[this.index].name}},methods:{toggleplay(){this.audio.paused?(console.log("paly()"),this.play()):(console.log("pause()"),this.pause())},togglelist(){"hidden"==this.showlist?this.showlist="visible":this.showlist="hidden"},play(){this.audio.play(),$(".play").css("background-position","-1px -164px")},pause(){this.audio.pause(),$(".play").css("background-position","-1px -204px")},pre(){0!=this.index?this.index--:this.index=this.length-1;var t=this.audio.paused;this.nowMusic;this.audio.load(),t||this.play()},nxt(){this.index!=this.length-1?this.index++:this.index=0;var t=this.audio.paused;this.audio.src=this.nowMusic,this.audio.load(),t||this.play()},timeformater(t){if(isNaN(t))return"00:00";let e=Math.floor(t/60),i=Math.floor(t%60);return i<10&&(i="0"+i),e<10&&(e="0"+e),e+":"+i},onTimeUpdate(){var t=this.audio.currentTime,e=this.audio.duration;this.playedtime=this.timeformater(t)+"/"+this.timeformater(e),this.curper=t/e*100},onclickInBar(t){console.log("点击了条(父组件)"),this.curper=t,this.audio.currentTime=t/100*this.audio.duration},clickinball(){console.log("点击了球(父组件)"),this.audio.removeEventListener("timeupdate",this.onTimeUpdate)},indrag(t){let e=this.audio.duration,i=e*t/100;this.playedtime=this.timeformater(i)+"/"+this.timeformater(e),this.curper=t},dragend(t){console.log("鼠标放开(父组件)"),this.curper=t,this.audio.currentTime=t/100*this.audio.duration,this.audio.addEventListener("timeupdate",this.onTimeUpdate)},onMouseDown(t){t.target,this.$el.contains(t.target)||(this.showlist="hidden")},onclickInVolumeBar(t){this.audio.volume=t/100},indexChange(t){this.index=t,this.audio.src=this.nowMusic,this.audio.load(),this.play()},newsong(t){t.name;let e=0,i=!1;for(e=0;e<this.length;e++)if(this.music[e].src==t.src){i=!0,console.log("已存在");break}0==i&&(this.music.push(t),this.$http({url:"http://127.0.0.1:8080/addtolist",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{src:t}})),this.index=e,this.audio.src=this.nowMusic,this.audio.load(),this.play()},deletFromList(t){console.log("下标是"+t);var e=this.music.splice(t,1);e[0],this.$http({url:"http://127.0.0.1:8080/deletFromList",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{src:e[0]}})},getData(){this.$http({url:"http://127.0.0.1:8080/page.json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{page:1,page_size:5},params:{listID:0},responseType:"json"}).then(t=>{t.data[1],t.data[1],this.$data.music=t.data,console.log(this.$data.music),this.init()})},onVolumeInDrag(t){this.audio.volume=t/100},togglemuted(){console.log("点击了静音键"),this.audio.muted?(this.muted="muted:no",this.audio.muted=!this.audio.muted):(this.muted="muted:yes",this.audio.muted=!this.audio.muted)},entermuted(){this.showVolumeBar="visible"},outmuted(){this.showVolumeBar="hidden"},audioend(){this.pause()},init(){console.log("初始化"),this.$data.music,this.audio.src=this.nowMusic,this.audio.load(),this.audio.volume=this.volume/100,this.audio.volume,this.audio.addEventListener("timeupdate",this.onTimeUpdate),document.addEventListener("mousedown",this.onMouseDown)}},mounted(){this.init()},created(){console.log("created"),this.getData(),n.$on("newsong",this.newsong)}};Vue.prototype.$http=axios,new Vue(y);const _=new VueRouter({routes:[{path:"/",redirect:"/playlist/list1"},{path:"/playlist",component:{template:"<div id='main'><router-view></router-view></div>"},children:[{path:"list1",component:l,props:{listID:1}},{path:"list2",component:l,props:{listID:2}}]}]});console.log(l);new Vue({router:_}).$mount("#app")}]);
//# sourceMappingURL=main.js.map